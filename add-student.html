<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ุฅุถุงูุฉ ุทุงูุจ โ Tahfidh Tracker</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="icon" type="image/png" sizes="64x64" href="assets_icons/appicon-64.png" />
  <link rel="manifest" href="manifest.json" />
</head>
<body>

<header class="app-header">
  <button class="menu-btn" onclick="history.back()">โ</button>
  <div class="app-title" id="pageTitle" data-i18n="addStudent">ุฅุถุงูุฉ ุทุงูุจ</div>
  <div style="display:flex; gap:4px;">
    <button id="langToggle" class="lang-switcher" onclick="toggleLang(); location.reload();">๐</button>
    <button id="darkToggle" class="lang-switcher" onclick="toggleDarkMode()"><img src="icons/day time icon.svg" style="width:20px; height:20px; filter:brightness(0) invert(1);" alt=""></button>
  </div>
</header>

<main class="main-content">
  <section class="card">
    <div class="form-group">
      <label class="form-label" data-i18n="studentNameLabel">ุงุณู ุงูุทุงูุจ *</label>
      <input id="studentName" class="form-input" data-i18n-ph="studentNamePh" placeholder="ุงูุงุณู ุงููุงูู" required />
    </div>
    <div class="form-group">
      <label class="form-label" data-i18n="gender">ุงูุฌูุณ</label>
      <div style="display:flex; gap:10px;">
        <button type="button" id="genderMale" class="btn btn-primary" style="flex:1; display:flex; align-items:center; justify-content:center; gap:6px; padding:0.6rem;" onclick="selectStudentGender('male')">
          <img src="icons/male teacher icon.svg" style="width:24px; height:24px;" alt="">
          <span data-i18n="male">ุฐูุฑ</span>
        </button>
        <button type="button" id="genderFemale" class="btn btn-secondary" style="flex:1; display:flex; align-items:center; justify-content:center; gap:6px; padding:0.6rem;" onclick="selectStudentGender('female')">
          <img src="icons/female teacher icon.svg" style="width:24px; height:24px;" alt="">
          <span data-i18n="female">ุฃูุซู</span>
        </button>
      </div>
      <input type="hidden" id="gender" value="ุฐูุฑ" />
    </div>
    <div class="form-group">
      <label class="form-label" data-i18n="studentPhotoLabel">ุตูุฑุฉ ุงูุทุงูุจ (ุงุฎุชูุงุฑู)</label>
      <div style="display:flex; align-items:center; gap:14px; margin-top:6px;">
        <img id="studentPhotoPreview" src="icons/male teacher icon.svg" alt=""
          style="width:64px; height:64px; border-radius:50%; object-fit:cover; border:2px solid var(--border); background:var(--bg); flex-shrink:0;" />
        <div style="display:flex; flex-direction:column; gap:8px; flex:1;">
          <label class="btn btn-secondary" for="studentPhotoInput"
            style="cursor:pointer; padding:0.4rem 1rem; font-size:0.85rem; text-align:center; display:block; margin:0;"
            data-i18n="uploadPhoto">ุฑูุน ุตูุฑุฉ</label>
          <input type="file" id="studentPhotoInput" accept="image/*" style="display:none;"
            onchange="handleStudentPhoto(this)" />
          <button type="button" id="studentPhotoClearBtn" class="btn" onclick="clearStudentPhoto()"
            style="display:none; padding:0.4rem 1rem; font-size:0.85rem; background:#FEE2E2; color:#DC2626; margin:0;"
            data-i18n="removePhoto">ุญุฐู ุงูุตูุฑุฉ</button>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label" data-i18n="courseLabel">ุงููุณุงุฑ</label>
      <select id="course" class="form-input form-select">
        <option value="hifdh" data-i18n="courseHifdh">ุญูุธ</option>
        <option value="talqin" data-i18n="courseTalqin">ุชูููู</option>
        <option value="murajaah" data-i18n="courseMurajaah">ูุฑุงุฌุนุฉ</option>
        <option value="qaida" data-i18n="courseQaida">ุงููุงุนุฏุฉ</option>
      </select>
    </div>
    <div class="form-group">
      <label class="form-label" data-i18n="phoneRequired">ุฑูู ุงููุงุชู (ููู ุงูุฃูุฑ) *</label>
      <input id="phone" class="form-input" type="tel" placeholder="+966..." required />
    </div>
    <div class="form-group">
      <label class="form-label" data-i18n="lastSurah">ุขุฎุฑ ุณูุฑุฉ ูุญููุธุฉ</label>
      <div id="lastSurahWrap"></div>
    </div>
    <div class="form-group">
      <label class="form-label" data-i18n="examJuzCount">ุนุฏุฏ ุฃุฌุฒุงุก ุงูุงุฎุชุจุงุฑ</label>
      <input id="examJuz" class="form-input" type="number" min="0" data-i18n-ph="examJuzPh" placeholder="ูุซุงู: 3" />
    </div>
    <div class="form-group">
      <label class="form-label" data-i18n="examPercentage">ูุณุจุฉ ุงูุงุฎุชุจุงุฑ %</label>
      <input id="examPercent" class="form-input" type="number" min="0" max="100" data-i18n-ph="examPercentPh" placeholder="ูุซุงู: 85" />
    </div>
    <div class="form-group">
      <label class="form-label" data-i18n="examNotes">ููุงุญุธุงุช ุงูุงุฎุชุจุงุฑ</label>
      <textarea id="examNotes" class="form-input" rows="3" data-i18n-ph="examNotesPh" placeholder="ููุงุญุธุงุช ุนู ุฃุฏุงุก ุงูุทุงูุจ ูู ุงูุงุฎุชุจุงุฑ..."></textarea>
    </div>
    <div class="form-group">
      <label class="form-label" data-i18n="notesOptional">ููุงุญุธุงุช (ุงุฎุชูุงุฑู)</label>
      <textarea id="notes" class="form-input" rows="3" data-i18n-ph="notesPh" placeholder="ุฃู ูุนูููุงุช ุฅุถุงููุฉ..."></textarea>
    </div>
    <button id="btnSave" class="btn btn-success btn-full" style="font-size:1.05rem; padding:0.85rem; margin-top:6px;" data-i18n="saveStudent">
      ุญูุธ ุงูุทุงูุจ
    </button>
    <button id="btnDelete" class="btn btn-full" style="background:#FEE2E2; color:#DC2626; margin-top:10px; display:none; gap:8px;">
      <img src="icons/delete icon.svg" style="width:18px; height:18px;" alt="">
      <span data-i18n="deleteStudent">ุญุฐู ุงูุทุงูุจ</span>
    </button>
  </section>
</main>

<footer class="branding-footer" data-i18n="footer">Made by Al Hudaa Program | ุตููุน ุจูุงุณุทุฉ ุจุฑูุงูุฌ ุงููุฏู</footer>

<script src="js/js/db.js"></script>
<script src="js/js/i18n.js"></script>
<script src="js/js/ui.js"></script>
<script src="js/js/add-student.js"></script>
</body>
</html>
