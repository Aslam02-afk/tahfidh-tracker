<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ุณุฌู ุงูุฑุณูู โ Tahfidh Tracker</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="icon" type="image/png" sizes="64x64" href="assets_icons/appicon-64.png" />
  <link rel="manifest" href="manifest.json" />
</head>
<body>

<header class="app-header">
  <button class="menu-btn" onclick="history.back()">โ</button>
  <div class="app-title" id="pageTitle">ุณุฌู ุงูุฑุณูู</div>
  <div style="display:flex; gap:4px;">
    <button id="langToggle" class="lang-switcher" onclick="toggleLang(); location.reload();">๐</button>
    <button id="darkToggle" class="lang-switcher" onclick="toggleDarkMode()">
      <img src="icons/day time icon.svg" style="width:20px; height:20px; filter:brightness(0) invert(1);" alt="">
    </button>
  </div>
</header>

<main class="main-content">
  <div id="feesContainer"></div>
</main>

<!-- Payment Modal -->
<div id="paymentModal" class="tt-modal" onclick="if(event.target===this) closePaymentModal()" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.5); z-index:1000; align-items:flex-end; justify-content:center;">
  <div style="background:var(--card-bg); border-radius:20px 20px 0 0; padding:24px; width:100%; max-width:480px; max-height:90vh; overflow-y:auto;">
    <div style="font-size:1.1rem; font-weight:800; margin-bottom:16px;">๐ฐ ุชุณุฌูู ุฏูุนุฉ ุฌุฏูุฏุฉ</div>

    <!-- Amount input -->
    <div class="form-group">
      <label class="form-label">ุงููุจูุบ ุงููุณุชูู</label>
      <div style="display:flex; align-items:center; gap:8px;">
        <input id="paymentAmount" class="form-input" type="number" min="0" placeholder="0" style="flex:1;"
          oninput="autoCalculatePeriods()" />
        <span id="paymentCurrency" style="font-weight:700; color:var(--text-muted); min-width:40px;"></span>
      </div>
    </div>

    <!-- Auto calculate hint -->
    <div id="autoCalcHint" style="font-size:0.82rem; color:#16A34A; font-weight:700; margin-bottom:12px; display:none;">
      โ ูุบุทู <span id="autoCalcCount"></span>
    </div>

    <!-- Payment method -->
    <div class="form-group">
      <label class="form-label">ุทุฑููุฉ ุงูุฏูุน</label>
      <div style="display:flex; gap:8px;">
        <button type="button" id="methodBank" class="btn btn-primary" style="flex:1; padding:0.5rem; font-size:0.85rem;"
          onclick="selectPaymentMethod('bank')">๐ฆ ุชุญููู ุจููู</button>
        <button type="button" id="methodStc" class="btn btn-secondary" style="flex:1; padding:0.5rem; font-size:0.85rem;"
          onclick="selectPaymentMethod('stc')">๐ฑ STC Pay</button>
        <button type="button" id="methodCash" class="btn btn-secondary" style="flex:1; padding:0.5rem; font-size:0.85rem;"
          onclick="selectPaymentMethod('cash')">๐ต ููุฏุงู</button>
      </div>
      <input type="hidden" id="paymentMethod" value="bank" />
    </div>

    <!-- Manual period selection -->
    <div class="form-group">
      <label class="form-label">ุงุฎุชุฑ ุงููุชุฑุงุช ุงููุฏููุนุฉ</label>
      <div id="periodCheckboxes" style="display:flex; flex-direction:column; gap:6px; max-height:200px; overflow-y:auto;"></div>
    </div>

    <div style="display:flex; gap:8px; margin-top:8px;">
      <button class="btn btn-secondary" style="flex:1;" onclick="closePaymentModal()">ุฅูุบุงุก</button>
      <button class="btn btn-success" style="flex:1;" onclick="savePayment()">๐พ ุญูุธ ุงูุฏูุนุฉ</button>
    </div>
  </div>
</div>

<footer class="branding-footer" data-i18n="footer">Made by Al Hudaa Program | ุตููุน ุจูุงุณุทุฉ ุจุฑูุงูุฌ ุงููุฏู</footer>

<script src="js/js/db.js"></script>
<script src="js/js/i18n.js"></script>
<script src="js/js/ui.js"></script>
<script src="js/js/fees.js"></script>
</body>
</html>